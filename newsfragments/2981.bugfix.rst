Fix potential race condition when writing cache entries in ``simple_cache_middleware``